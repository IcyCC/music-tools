<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—‹å¾‹æ¼”ç¤ºæµ‹è¯•</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a, #1e293b);
            min-height: 100vh;
            padding: 2rem;
            color: white;
        }
        h1 { text-align: center; margin-bottom: 2rem; }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            max-width: 900px;
            margin: 0 auto;
        }
        .demo-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 1.25rem;
        }
        .demo-card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        .demo-card .chords {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 1rem;
        }
        .btn-group {
            display: flex;
            gap: 0.5rem;
        }
        .btn {
            flex: 1;
            padding: 0.6rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .btn-melody {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .btn-chords {
            background: #334155;
            color: #e2e8f0;
        }
        .btn:hover { transform: translateY(-2px); }
        .hint {
            text-align: center;
            margin-top: 2rem;
            color: #64748b;
            font-size: 0.9rem;
        }
        .playing {
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
        }
    </style>
</head>
<body>
    <h1>ğŸµ å’Œå¼¦èµ°å‘æ—‹å¾‹æ¼”ç¤º</h1>
    
    <div class="demo-grid">
        <div class="demo-card" id="card-canon">
            <h3>Canon è¿›è¡Œ</h3>
            <p class="chords">C â†’ G â†’ Am â†’ F</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('canon', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['C','G','Am','F'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-50s">
            <h3>50å¹´ä»£è¿›è¡Œ</h3>
            <p class="chords">C â†’ Am â†’ F â†’ G</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('50s', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['C','Am','F','G'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-sad">
            <h3>æ‚²ä¼¤è¿›è¡Œ</h3>
            <p class="chords">Am â†’ F â†’ C â†’ G</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('sad', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['Am','F','C','G'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-simple">
            <h3>ä¸‰å’Œå¼¦</h3>
            <p class="chords">C â†’ F â†’ G â†’ C</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('simple', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['C','F','G','C'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-iiv">
            <h3>ii-V-I (çˆµå£«)</h3>
            <p class="chords">Dm â†’ G â†’ C</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('iiv', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['Dm','G','C'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-axis">
            <h3>Axis è¿›è¡Œ</h3>
            <p class="chords">Am â†’ F â†’ C â†’ G</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('axis', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['Am','F','C','G'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-sensitive">
            <h3>æ•æ„Ÿè¿›è¡Œ</h3>
            <p class="chords">C â†’ Em â†’ Am â†’ F</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('sensitive', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['C','Em','Am','F'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-andalusian">
            <h3>Andalusian</h3>
            <p class="chords">Am â†’ G â†’ F â†’ E</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('andalusian', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['Am','G','F','E'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
        
        <div class="demo-card" id="card-blues">
            <h3>12å°èŠ‚è“è°ƒ</h3>
            <p class="chords">CCCC FFCC GFCG</p>
            <div class="btn-group">
                <button class="btn btn-melody" onclick="playWithMelody('blues12', this)">ğŸ¹ å¸¦æ—‹å¾‹</button>
                <button class="btn btn-chords" onclick="playOnlyChords(['C','C','C','C','F','F','C','C','G','F','C','G'], this)">ğŸµ ä»…å’Œå¼¦</button>
            </div>
        </div>
    </div>
    
    <p class="hint">ğŸ’¡ ç‚¹å‡»"å¸¦æ—‹å¾‹"å¯ä»¥å¬åˆ°è¯¥èµ°å‘çš„æ—‹å¾‹æ¼”ç¤ºï¼Œ"ä»…å’Œå¼¦"åªæ’­æ”¾å’Œå¼¦</p>
    
    <script src="audio-engine.js"></script>
    <script>
        let currentCard = null;
        
        async function playWithMelody(name, btn) {
            clearHighlight();
            const card = btn.closest('.demo-card');
            card.classList.add('playing');
            currentCard = card;
            await playDemo(name);
            setTimeout(() => {
                if (currentCard === card) card.classList.remove('playing');
            }, 5000);
        }
        
        async function playOnlyChords(chords, btn) {
            clearHighlight();
            const card = btn.closest('.demo-card');
            card.classList.add('playing');
            currentCard = card;
            await playProgression(chords);
            setTimeout(() => {
                if (currentCard === card) card.classList.remove('playing');
            }, 3000);
        }
        
        function clearHighlight() {
            document.querySelectorAll('.demo-card').forEach(c => c.classList.remove('playing'));
        }
    </script>
</body>
</html>
